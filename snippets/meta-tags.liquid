{%- if template == 'index' -%}
  <title>{{ shop.name }}</title>
{%- else -%}
  <title>{{ page_title | escape }} | {{ shop.name }}</title>
{%- endif -%}

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="description" content="{{ page_description | escape }}">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="theme-color" content="{{ settings.color_primary }}">

{%- if canonical_url != blank -%}
  <link rel="canonical" href="{{ canonical_url }}">
{%- endif -%}

{%- if settings.favicon != blank -%}
  <link rel="shortcut icon" href="{{ settings.favicon | img_url: '32x32' }}" type="image/png">
{%- endif -%}

{%- if template.directory == 'customers' -%}
  <script src="{{ 'shopify_common.js' | shopify_asset_url }}" defer="defer"></script>
{%- endif -%}

{%- if template == 'collection' -%}
  {%- if current_tags -%}
    <meta name="robots" content="noindex">
  {%- endif -%}
{%- endif -%}

<!-- Social meta tags -->
{%- if template == 'index' -%}
  <meta property="og:type" content="website">
  <meta property="og:title" content="{{ shop.name }}">
  <meta property="og:description" content="{{ page_description | escape }}">
  <meta property="og:url" content="{{ shop.url }}{{ page.url }}">
  {%- if settings.share_image != blank -%}
    <meta property="og:image" content="{{ settings.share_image | img_url: 'master' }}">
  {%- endif -%}
{%- elsif template == 'product' -%}
  <meta property="og:type" content="product">
  <meta property="og:title" content="{{ product.title | escape }}">
  <meta property="og:description" content="{{ product.description | strip_html | truncatewords: 30 | escape }}">
  <meta property="og:url" content="{{ shop.url }}{{ product.url }}">
  <meta property="og:image" content="{{ product.featured_image | img_url: 'master' }}">
  <meta property="product:price:amount" content="{{ product.price | money_without_currency | strip_html }}">
  <meta property="product:price:currency" content="{{ cart.currency.iso_code }}">
{%- elsif template == 'article' -%}
  <meta property="og:type" content="article">
  <meta property="og:title" content="{{ article.title | escape }}">
  <meta property="og:description" content="{{ article.excerpt_or_content | strip_html | truncatewords: 30 | escape }}">
  <meta property="og:url" content="{{ shop.url }}{{ article.url }}">
  {%- if article.image -%}
    <meta property="og:image" content="{{ article.image | img_url: 'master' }}">
  {%- endif -%}
{%- else -%}
  <meta property="og:type" content="website">
  <meta property="og:title" content="{{ page_title | escape }}">
  <meta property="og:description" content="{{ page_description | escape }}">
  <meta property="og:url" content="{{ shop.url }}{{ page.url }}">
{%- endif -%}

<!-- Twitter Card meta tags -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ page_title | escape }}">
<meta name="twitter:description" content="{{ page_description | escape }}">
{%- if template == 'product' -%}
  <meta name="twitter:image" content="{{ product.featured_image | img_url: 'master' }}">
{%- elsif template == 'article' and article.image -%}
  <meta name="twitter:image" content="{{ article.image | img_url: 'master' }}">
{%- elsif settings.share_image != blank -%}
  <meta name="twitter:image" content="{{ settings.share_image | img_url: 'master' }}">
{%- endif -%}

<!-- Structured Data -->
{%- if template == 'product' -%}
<script type="application/ld+json">
{
  "@context": "https://schema.org/",
  "@type": "Product",
  "name": "{{ product.title | escape }}",
  "image": "{{ product.featured_image | img_url: 'master' }}",
  "description": "{{ product.description | strip_html | escape }}",
  "brand": {
    "@type": "Brand",
    "name": "{{ product.vendor | escape }}"
  },
  "offers": {
    "@type": "Offer",
    "url": "{{ shop.url }}{{ product.url }}",
    "priceCurrency": "{{ cart.currency.iso_code }}",
    "price": "{{ product.price | money_without_currency | strip_html }}",
    "availability": "{% if product.available %}https://schema.org/InStock{% else %}https://schema.org/OutOfStock{% endif %}"
  }
}
</script>
{%- endif -%}
